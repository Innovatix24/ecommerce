@page "/admin/attribute-groups";
@using Application.Features.Attributes.DTOs
@using Application.Features.Attributes.Queries;
@using BongoEcom.Components.Common
@rendermode InteractiveServer

@inject IDialogService DialogService;

<div class="card">
    <div class="card-body">
        <div>
            <div style="display:flex; justify-content:space-between;">
                <h3>Attribute Groups</h3>
                <FluentButton @onclick=@CreateGroup Color="White" BackgroundColor="Teal">Create Group</FluentButton>
            </div>
            <div style="height:85vh;">
                <FluentDataGrid Items="Groups?.AsQueryable()"
                                TGridItem="AttributeGroupDto"
                                RowSize="@rowSize"
                                Pagination="@groupPagination"
                                AutoItemsPerPage="true"
                                Style="overflow-y:hidden;">
                    <TemplateColumn Width="60px" Title="Sl">
                        <p>@(Groups?.IndexOf(context) + 1)</p>
                    </TemplateColumn>
                    <PropertyColumn Property="@(c => c.Name)" Sortable="true" />
                    <TemplateColumn Title="Action">
                        <div style="display:flex;">
                            <FluentButton IconEnd="@(new Icons.Regular.Size16.Edit())"
                                            Title="Edit"
                                            OnClick="@(() => EditGroup(context))" />
                            <FluentButton IconEnd="@(new Icons.Regular.Size16.Delete())"
                                            Title="Delete"
                                            Color="Color.Error"
                                            OnClick="@(() => DeleteGroup(context.Id))" />
                        </div>
                    </TemplateColumn>
                </FluentDataGrid>
                <FluentPaginator State="@groupPagination" />
            </div>
        </div>
    </div>
</div>


@code {
    DataGridRowSize rowSize = DataGridRowSize.Medium;
    PaginationState pagination = new PaginationState { ItemsPerPage = 10 };
    PaginationState groupPagination = new PaginationState { ItemsPerPage = 10 };
}

